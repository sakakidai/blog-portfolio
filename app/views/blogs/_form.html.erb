<%= nested_form_for(@blog) do |f| %>
  <%= render 'shared/error', object: @blog %>
  <div class='form-group'>
    <%= f.label :title, class: 'label-title' %>
    <%= f.text_field :title, class: 'form-control', placeholder: 'タイトル', autofocus: true %>
  </div>

  <div class='form-group'>
    <%= f.label :body, class: 'label-body' %>
    <%= f.text_area :body, class: 'form-control', rows: 10, placeholder: '記事の内容' %>
  </div>

  <%= f.fields_for :images, :html => { multipart: true } do |f| %>
    <div class='form-group'>
      <%= f.label :title, class: 'label-title' %>
      <%= f.text_field :title, class: 'form-control', placeholder: 'タイトル' %>
    </div>
    <label class='btn btn-outline btn-sm mb-3 filefield_label'>
      画像の添付（ファイルを開く）
      <%= f.file_field :picture, accept: 'image/jpeg,image/gif,image/png', style: "display:none;" %>
    </label>
    <%= f.link_to_remove "写真リンクの削除", class: "btn btn-outline btn-sm mb-3" %>
  <% end %>
  <%= f.link_to_add "画像の追加", :images, class: "btn btn-outline btn-sm mb-3" %>

  <div class='form-group'>
    <%= f.submit nil, class: 'btn btn-outline'%>
  </div>
<% end %>

<script type="text/javascript">
  $('#blog_images_attributes_0_picture').bind('change', function() {
    var size_in_megabytes = this.files[0].size/1024/1024;
    if (size_in_megabytes > 5) {
      alert('Maximum file size is 5MB. Please choose a smaller file.');
    }
  });
</script>